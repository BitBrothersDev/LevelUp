<p style="color: green"><%= notice %></p>
<div class="d-flex justify-content-between">
  <span><%= link_to "<- Back to skills", skills_path, class: 'btn btn-link' %></span>
  <span><%= link_to "Edit this skill", edit_skill_path(@skill), class: 'btn btn-link' %></span>
</div>
<div class="d-flex align-items-center p-3 my-3 text-white-50 bg-purple rounded shadow-sm">
      <div class="col-6"><h6 class="mb-0 text-white lh-100 fs-4"><%= "#{@skill.name}#{@skill.skill_category&.name ? " (#{@skill.skill_category&.name})" : nil}" %></h6></div>
      <div class="d-flex justify-content-end ms-auto">
        <span><%= button_to "Destroy this skill", @skill, method: :delete, class: 'btn btn-danger' %></span>
      </div>
    <!--    <small>Since 2011</small>-->
</div>
<div class="my-5 p-3 bg-white rounded shadow-sm">
  <h6 class="border-bottom border-gray pb-2 mb-0">
    <b>Skill description</b>
  </h6>
  <p>
    <%= @skill.description %>
  </p>
</div>

<div class="my-5 p-3 bg-white rounded shadow-sm">
  <h6 class="d-flex border-bottom border-gray pb-2 mb-0">
    <ul class="nav nav-pills" id="myTab" role="tablist">
      <% @skill.skill_levels.each_with_index  do |skill_level, i| %>
        <li class="nav-item" role="presentation">
          <button class="nav-link <%= i.zero? ? 'active' : '' %>" id="<%= [skill_level.level.title, skill_level.id].join("-") %>" data-bs-toggle="tab" data-bs-target="#<%= [skill_level.level.title, skill_level.id, 'tab-id'].join("-") %>" type="button" role="tab" aria-controls="home" aria-selected="true"><%= skill_level.level.title %></button>
        </li>
      <% end %>
    </ul>
  </h6>
  <div class="tab-content" id="myTabContent">
    <% @skill.skill_levels.each_with_index  do |skill_level, i| %>
      <%= render 'skills/skill_level_form', skill_level: skill_level %>
      <%= render 'skills/add_skill_level_item', skill_level: skill_level, skill_level_item: SkillLevelItem.new  %>
      <%= render 'skills/add_learning_material', skill_level: skill_level, learning_material: LearningMaterial.new  %>
      <div class="tab-pane fade show <%= i.zero? ? 'active' : '' %>" id="<%= [skill_level.level.title, skill_level.id, 'tab-id'].join("-") %>" role="tabpanel" aria-labelledby="<%= [skill_level.level.title, skill_level.id].join("-") %>">
        <div class="d-flex justify-content-between align-items-center">
          <div class="mt-4 mb-2  fs-5">
            <b>What you should know</b>
          </div>
          <div class="ms-auto">
            <div class="btn btn-outline-primary" type="button"data-bs-toggle="modal" data-bs-target="#modal-add_skill_level_item-<%= skill_level.id %>-">Add Item</div>
            <div class="btn btn-outline-primary" type="button"data-bs-toggle="modal" data-bs-target="#modal-edit_skill_level-<%= skill_level.id %>">Edit</div>
          </div>
        </div>
        <div class="bg-purple rounded p-3">
          <% skill_level.skill_level_items.each_with_index  do |skill_level_item, i| %>
            <div class="w-100 bg-white my-2 rounded px-3 py-1" role="button" data-bs-toggle="collapse" data-bs-target="#collapse-learning-material-<%= skill_level_item.id %>">
                <div class="d-flex align-items-center">
                  <div>
                    <div class="text-black fw-normal "><%= skill_level_item.name %></div>
                    <small style='font-size:10px'><%= !skill_level_item.tip.blank? ? skill_level_item.tip : 'tip' %></small>
                  </div>

                  <div class="ms-auto">
                    <div class="btn btn-outline-primary" type="button"data-bs-toggle="modal" data-bs-target="#modal-add_skill_level_item-<%= skill_level.id %>-<%= skill_level_item.id %>">Edit</div>
                  </div>
                </div>
              </div>
            <div class="collapse" id="collapse-learning-material-<%= skill_level_item.id %>">
              <div class="row">
                <% skill_level.learning_materials.where(skill_level_item: skill_level_item).each do |material| %>

                  <div class="col-md-6">
                    <div class="border d-flex align-items-center p-3 my-2 text-white-50 bg-purple rounded shadow-sm">

                      <div class="lh-1">
                        <h1 class="h6 mb-0 text-white lh-1"><%= material.name %></h1>
                        <small><%= material.material_type %></small>
                      </div>
                      <div class="ms-auto">
                        <%= link_to '-> Visit Link', material.link, class: 'btn btn-link text-white-50 fs-5' %>

                        <div class="btn btn-link text-white-50 fs-5" type="button" data-bs-toggle="modal" data-bs-target="#modal-add-material-<%= skill_level.id %>-<%= material.id %>">Edit</div>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>
            </div>
            <%= render 'skills/add_skill_level_item', skill_level: skill_level, skill_level_item: skill_level_item  %>
          <% end %>
        </div>

        <%= skill_level.notice %>
        <div class="d-flex justify-content-between align-items-center my-2">
          <h6>
            <b>Learning materials</b>
          </h6>
          <div class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#modal-add-material-<%= skill_level.id %>-">+ Add</div>
        </div>
        <div class="row">
          <% skill_level.learning_materials.each do |material| %>

            <div class="col-md-6">
              <div class="d-flex align-items-center p-3 my-2 text-white-50 bg-purple rounded shadow-sm">

                <div class="lh-1">
                  <h1 class="h6 mb-0 text-white lh-1"><%= material.name %></h1>
                  <small><%= material.material_type %></small>
                </div>
                <div class="ms-auto">
                  <%= link_to '-> Visit Link', material.link, class: 'btn btn-link text-white-50 fs-5' %>
                  <%= render 'skills/add_learning_material', skill_level: skill_level, learning_material: material  %>

                  <div class="btn btn-link text-white-50 fs-5" type="button" data-bs-toggle="modal" data-bs-target="#modal-add-material-<%= skill_level.id %>-<%= material.id %>">Edit</div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
